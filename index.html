<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>è‹±é›„è¯ç›Ÿç¦ä»¤ç®¡ç†ç³»çµ± | LOL Ban Manager</title>
  
  <link rel="icon" href="https://raw.githubusercontent.com/yangmemory/lol-timer/main/lol.ico" type="image/x-icon" />
  <link rel="shortcut icon" href="https://raw.githubusercontent.com/yangmemory/lol-timer/main/lol.ico" type="image/x-icon" />
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Noto+Serif+SC:wght@900&display=swap" rel="stylesheet">

  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root { --lol-gold: #c89b3c; --lol-blue: #010a13; --lol-border: #463714; --lol-red: #ff4655; }
    body { background-color: #010a13; color: #f0e6d2; font-family: "Microsoft YaHei", sans-serif; overflow-x: hidden; }
    body::before {
      content: ""; position: fixed; inset: 0;
      background: url("https://p6.qhimg.com/t01666e8536ec7a38f3.jpg") center / cover no-repeat fixed;
      filter: brightness(0.2); z-index: -2;
    }
    .lol-special-font { font-family: 'Noto Serif SC', 'Cinzel', serif; }
    .hextech-card { background: rgba(1, 10, 19, 0.95); border: 1px solid var(--lol-border); box-shadow: inset 0 0 20px rgba(0,0,0,0.8); }
    
    .btn-play-style {
      background: linear-gradient(to bottom, #c89b3c 0%, #785a28 100%);
      border: 1px solid #010a13; box-shadow: inset 0 0 1px 1px rgba(255,255,255,0.3);
      color: #010a13; font-weight: 900; transition: all 0.1s; cursor: pointer;
    }
    .btn-play-style:hover {
      background: linear-gradient(to bottom, #e1ad42 0%, #c89b3c 100%);
      box-shadow: inset 0 0 1px 1px rgba(255,255,255,0.4), 0 0 15px rgba(200, 155, 60, 0.5);
    }
    .btn-danger-style { background: rgba(153, 45, 34, 0.1); border: 1px solid #992d22; color: #992d22; font-weight: 900; cursor: pointer; }

    .lol-timer-red {
      color: var(--lol-red);
      text-shadow: 0 0 12px rgba(255, 70, 85, 0.8);
      font-family: 'Cinzel', 'Courier New', Courier, monospace;
    }

    @keyframes warn-blink {
      0%, 100% { opacity: 1; filter: drop-shadow(0 0 8px var(--lol-red)); }
      50% { opacity: 0.6; filter: drop-shadow(0 0 2px var(--lol-red)); }
    }
    .warn-icon-red { color: var(--lol-red); display: inline-block; margin-right: 8px; animation: warn-blink 1s infinite; font-weight: bold; }

    .input-group { position: relative; display: flex; align-items: center; background: rgba(0,0,0,0.5); border: 1px solid var(--lol-border); height: 52px; }
    input { background: transparent !important; border: none !important; color: #f0e6d2 !important; height: 100%; width: 100%; text-align: center; font-weight: bold; outline: none; }
    
    input[type="date"]::-webkit-calendar-picker-indicator {
      filter: invert(72%) sepia(15%) saturate(848%) hue-rotate(1deg) brightness(95%) contrast(88%);
      cursor: pointer; position: absolute; right: 12px; z-index: 20;
    }

    /* èªè¨€åˆ‡æ›æ‡¸æµ®çƒ */
    #lang-menu-btn {
      position: fixed; top: 130px; right: 1.5rem; z-index: 100;
      width: 46px; height: 46px; border-radius: 50%;
      background: rgba(1, 10, 19, 0.9); border: 2px solid var(--lol-gold);
      display: flex; align-items: center; justify-content: center;
      cursor: pointer; box-shadow: 0 0 15px rgba(200, 155, 60, 0.4);
      transition: all 0.3s;
    }
    #lang-menu-btn:hover { transform: rotate(45deg); }

    #lang-panel {
      position: fixed; top: 185px; right: 1.5rem; z-index: 99;
      background: rgba(1, 10, 19, 0.98); border: 1.5px solid var(--lol-border);
      padding: 5px 0; border-radius: 4px; display: none;
      box-shadow: -5px 5px 20px rgba(0,0,0,0.8); min-width: 120px;
    }
    .lang-item {
      padding: 12px 20px; cursor: pointer; color: var(--lol-gold);
      font-weight: bold; font-size: 0.9rem; text-align: center;
      border-bottom: 1px solid rgba(74, 55, 20, 0.3); transition: all 0.2s;
    }
    .lang-item:last-child { border-bottom: none; }
    .lang-item:hover { background: rgba(200, 155, 60, 0.15); color: #f0e6d2; }
    .lang-item.active { background: var(--lol-gold); color: var(--lol-blue); }

    /* æ»¾å‹•æ¨™èªå„ªåŒ– */
    .scroll-container { 
      background: rgba(30, 35, 40, 0.9); 
      border-bottom: 1px solid var(--lol-border); 
      overflow: hidden; 
      white-space: nowrap; 
      cursor: default;
    }
    .scroll-text { 
      display: inline-block; 
      padding-left: 100%; 
      animation: marquee 35s linear infinite; 
      color: var(--lol-gold); 
      font-size: 1.1rem; /* å­—é«”ç¨å¤§ä¸€é» */
      font-weight: bold; 
      line-height: 2.5rem; /* é…åˆå­—é«”å¢åŠ é«˜åº¦ */
    }
    /* é¼ æ¨™åœç•™æš«åœå‹•ç•« */
    .scroll-container:hover .scroll-text {
      animation-play-state: paused;
    }
    @keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }
  </style>
</head>
<body class="min-h-screen relative">

  <audio id="lol-click-sound" preload="auto">
    <source src="https://raw.githubusercontent.com/yangmemory/lol-timer/main/click.mp3" type="audio/mpeg">
  </audio>

  <div id="lang-menu-btn" onclick="toggleLangPanel()">
    <span style="font-size: 22px;">âš™ï¸</span>
  </div>
  <div id="lang-panel">
    <div class="lang-item" onclick="changeLang('zh')" id="lang-zh">ğŸ‡¨ğŸ‡³ ç®€ä¸­</div>
    <div class="lang-item" onclick="changeLang('tw')" id="lang-tw">ğŸ‡­ğŸ‡° ç¹ä¸­</div>
    <div class="lang-item" onclick="changeLang('en')" id="lang-en">ğŸ‡ºğŸ‡¸ EN</div>
    <div class="lang-item" onclick="changeLang('ja')" id="lang-ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬</div>
    <div class="lang-item" onclick="changeLang('ko')" id="lang-ko">ğŸ‡°ğŸ‡· í•œêµ­</div>
  </div>

  <div class="scroll-container mb-8">
    <div id="marquee-text" class="scroll-text"></div>
  </div>

  <div class="max-w-6xl mx-auto p-4">
    <header class="text-center mb-10">
      <h1 id="main-title" class="text-3xl font-bold mb-2 lol-special-font text-[#c89b3c] tracking-[0.2em]"></h1>
      <div class="h-[1.5px] w-48 bg-gradient-to-r from-transparent via-[#c89b3c] to-transparent mx-auto mb-2 opacity-80"></div>
      <p class="text-[#a09b8c] text-[10px] italic tracking-[0.3em] uppercase opacity-70 lol-special-font">Justice Will Be Served</p>
    </header>

    <div class="hextech-card p-4 md:p-8 mb-10">
      <div class="grid grid-cols-1 lg:grid-cols-5 gap-4 md:gap-6">
        <div class="flex flex-col">
          <label id="lbl-acc" class="text-base text-[#c89b3c] mb-2 uppercase font-black text-center tracking-widest">å¬å–šå¸«å¸³è™Ÿ</label>
          <div class="input-group"><input id="account" placeholder="SUMMONER NAME" /></div>
        </div>
        <div class="flex flex-col">
          <label id="lbl-type" class="text-base text-[#c89b3c] mb-2 uppercase font-black text-center tracking-widest">è™•ç½°é¡å‹</label>
          <div class="flex h-[52px] border border-[#463714] overflow-hidden">
            <div class="flex-1 flex items-center justify-center cursor-pointer font-bold text-sm transition-all" id="type-ban" onclick="setType('è§£ç¦')"></div>
            <div class="flex-1 flex items-center justify-center cursor-pointer font-bold text-sm transition-all border-l border-[#463714]" id="type-app" onclick="setType('ç”³è¿°')"></div>
          </div>
        </div>
        <div class="flex flex-col">
          <label id="lbl-date" class="text-base text-[#c89b3c] mb-2 uppercase font-black text-center tracking-widest">é¸æ“‡æ—¥æœŸ</label>
          <div class="input-group"><input id="date" type="date" /></div>
        </div>
        <div class="flex flex-col">
          <label id="lbl-time" class="text-base text-[#c89b3c] mb-2 uppercase font-black text-center tracking-widest">å…·é«”æ™‚é–“</label>
          <div class="input-group"><input id="time" type="text" placeholder="16:30" maxlength="5" oninput="this.value = this.value.replace(/[^\d]/g, '').replace(/(\d{2})(?=\d)/, '$1:')" /></div>
        </div>
        <div class="flex items-end"><button onclick="addRecord()" id="btn-add" class="btn-play-style w-full h-[52px] text-xl font-black tracking-[0.2em]"></button></div>
      </div>
      <div class="flex flex-wrap gap-4 md:gap-16 mt-8 pt-6 border-t border-[#1e2328] text-sm md:text-base font-black uppercase justify-center tracking-widest">
        <button onclick="exportData()" id="btn-exp" class="text-[#c89b3c] hover:text-white transition-colors"></button>
        <label id="btn-imp-lbl" class="text-[#c89b3c] hover:text-white cursor-pointer transition-colors"></label>
        <input type="file" id="importFile" class="hidden" onchange="importData(this)">
      </div>
    </div>

    <div class="flex flex-col md:flex-row gap-4 mb-10 items-center">
      <div class="relative flex-1 w-full">
        <input id="search" oninput="render()" class="w-full p-4 bg-[#010a13] border border-[#1e2328] italic text-[#f0e6d2] text-lg focus:border-[#c89b3c] outline-none text-center" />
      </div>
      <button onclick="toggleSort()" class="btn-play-style px-8 h-[58px] text-sm font-black tracking-widest min-w-[160px]">
        <span id="sort-lbl"></span>ï¼š<span id="sort-val"></span>
      </button>
    </div>

    <div id="list" class="grid grid-cols-1 md:grid-cols-2 gap-6"></div>
  </div>

<script>
function playClickSound() {
  const sound = document.getElementById('lol-click-sound');
  sound.currentTime = 0;
  sound.play().catch(e => {});
}

function toggleLangPanel() {
  playClickSound();
  const panel = document.getElementById('lang-panel');
  panel.style.display = (panel.style.display === 'block') ? 'none' : 'block';
}

const i18n = {
  zh: {
    title: "è‹±é›„è”ç›Ÿç¦ä»¤ç®¡ç†ç³»ç»Ÿ",
    marquee: "ğŸ›¡ï¸ æŠµåˆ¶å¤–æŒ‚ï¼Œå…±å»ºå…¬å¹³ç«æŠ€ç¯å¢ƒã€‚ âš–ï¸ è™šå‡çš„èƒœåˆ©æ¯«æ— æ„ä¹‰ï¼ŒçœŸå®çš„ç«æŠ€æ‰æ˜¯è£è€€ã€‚ âš”ï¸ å‡­å®åŠ›èµ¢ä¸‹çš„æ¯”èµ›ï¼Œæ‰æ˜¯å¬å”¤å¸ˆçœŸæ­£çš„å°Šä¸¥ã€‚ ğŸš« è«è®©è„šæœ¬æŠ¹é»‘ä½ çš„æ“ä½œï¼Œè«è®©å°å·ç»ˆç»“ä½ çš„è‹±é›„è·¯ï¼",
    acc: "å¬å”¤å¸ˆè´¦å·", type: "å¤„ç½šç±»å‹", date: "é€‰æ‹©æ—¥æœŸ", time: "å…·ä½“æ—¶é—´",
    ban: "è´¦å·è§£ç¦", app: "å‘èµ·ç”³è¿°", add: "å½•å…¥ç³»ç»Ÿ", exp: "ğŸ“¥ ä¸‹è½½å¤‡ä»½æ•°æ®", imp: "ğŸ“¤ ä¸Šä¼ å¤‡ä»½æ•°æ®",
    search: "ğŸ” æœç´¢å¬å”¤å¸ˆè®°å½•...", sort: "æ’åº", recent: "æœ€è¿‘åˆ°æœŸ", far: "æœ€è¿œåˆ°æœŸ",
    target: "ç›®æ ‡æ—¶åˆ»", finished: "æµç¨‹ç»“æŸ", edit: "ä¿®æ”¹", del: "ç§»é™¤",
    confImp: "ç¡®è®¤å¯¼å…¥å¤‡ä»½ï¼Ÿ", confDel: "ç¡®å®šè¦ç§»é™¤æ­¤è®°å½•å—ï¼Ÿ", alertFill: "è¯·å¡«å†™è´¦å·å’Œæ—¥æœŸ", day: "å¤©"
  },
  tw: {
    title: "è‹±é›„è¯ç›Ÿç¦ä»¤ç®¡ç†ç³»çµ±",
    marquee: "ğŸ›¡ï¸ æŠµåˆ¶å¤–æ›ï¼Œå…±å»ºå…¬å¹³ç«¶æŠ€ç’°å¢ƒã€‚ âš–ï¸ è™›å‡çš„å‹åˆ©æ¯«ç„¡æ„ç¾©ï¼ŒçœŸå¯¦çš„ç«¶æŠ€æ‰æ˜¯æ¦®è€€ã€‚ âš”ï¸ æ†‘å¯¦åŠ›è´ä¸‹çš„æ¯”è³½ï¼Œæ‰æ˜¯å¬å–šå¸«çœŸæ­£çš„å°Šåš´ã€‚ ğŸš« è«è®“è…³æœ¬æŠ¹é»‘ä½ çš„æ“ä½œï¼Œè«è®“å°è™Ÿçµ‚çµä½ çš„è‹±é›„è·¯ï¼",
    acc: "å¬å–šå¸«å¸³è™Ÿ", type: "è™•ç½°é¡å‹", date: "é¸æ“‡æ—¥æœŸ", time: "å…·é«”æ™‚é–“",
    ban: "å¸³è™Ÿè§£ç¦", app: "ç™¼èµ·ç”³è¿°", add: "éŒ„å…¥ç³»çµ±", exp: "ğŸ“¥ ä¸‹è¼‰å‚™ä»½æ•¸æ“š", imp: "ğŸ“¤ ä¸Šå‚³å‚™ä»½æ•¸æ“š",
    search: "ğŸ” æœå°‹å¬å–šå¸«è¨˜éŒ„...", sort: "æ’åº", recent: "æœ€è¿‘åˆ°æœŸ", far: "æœ€é åˆ°æœŸ",
    target: "ç›®æ¨™æ™‚åˆ»", finished: "æµç¨‹çµæŸ", edit: "ä¿®æ”¹", del: "ç§»é™¤",
    confImp: "ç¢ºèªåŒ¯å…¥å‚™ä»½ï¼Ÿ", confDel: "ç¢ºå®šè¦ç§»é™¤æ­¤è¨˜éŒ„å—ï¼Ÿ", alertFill: "è«‹å¡«å¯«å¸³è™Ÿå’Œæ—¥æœŸ", day: "å¤©"
  },
  en: {
    title: "LOL Ban Manager System",
    marquee: "ğŸ›¡ï¸ Resist cheats, build a fair environment. âš–ï¸ Fake victory is meaningless, true skill is glory. âš”ï¸ Wins by real strength are the summoner's pride. ğŸš« Don't let scripts tarnish your play!",
    acc: "Summoner Account", type: "Type", date: "Select Date", time: "Specific Time",
    ban: "Unban", app: "Appeal", add: "Submit", exp: "ğŸ“¥ Export Data", imp: "ğŸ“¤ Import Data",
    search: "ğŸ” Search Records...", sort: "Sort", recent: "Earliest", far: "Latest",
    target: "Target Time", finished: "FINISHED", edit: "Edit", del: "Remove",
    confImp: "Import backup?", confDel: "Remove this record?", alertFill: "Please fill in Account and Date", day: "Day"
  },
  ja: {
    title: "ãƒªãƒ¼ã‚°ãƒ»ã‚ªãƒ–ãƒ»ãƒ¬ã‚¸ã‚§ãƒ³ãƒ‰åˆ¶è£ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ",
    marquee: "ğŸ›¡ï¸ ãƒãƒ¼ãƒˆã‚’é˜²æ­¢ã—ã€å…¬å¹³ãªç«¶æŠ€ç’°å¢ƒã‚’ã€‚ âš–ï¸ å½ã‚Šã®å‹åˆ©ã«æ„å‘³ã¯ãªãã€çœŸã®æŠ€è¡“ã“ããŒæ „å…‰ã§ã‚ã‚‹ã€‚ âš”ï¸ å®ŸåŠ›ã§æ´ã‚“ã å‹åˆ©ã“ãã€ã‚µãƒ¢ãƒŠãƒ¼ã®çœŸã®èª‡ã‚Šã€‚ ğŸš« ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§è‡ªåˆ†ã®ãƒ—ãƒ¬ã‚¤ã‚’æ±šã•ãªã„ã§ï¼",
    acc: "ã‚µãƒ¢ãƒŠãƒ¼å", type: "åˆ¶è£ç¨®é¡", date: "æ—¥ä»˜é¸æŠ", time: "è©³ç´°æ™‚é–“",
    ban: "è§£é™¤äºˆå®š", app: "ç•°è­°ç”³ã—ç«‹ã¦", add: "ã‚·ã‚¹ãƒ†ãƒ ç™»éŒ²", exp: "ğŸ“¥ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å‡ºåŠ›", imp: "ğŸ“¤ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—èª­è¾¼",
    search: "ğŸ” ã‚µãƒ¢ãƒŠãƒ¼æ¤œç´¢...", sort: "ä¸¦ã³æ›¿ãˆ", recent: "æœŸé™é–“è¿‘", far: "æœŸé™é ã„",
    target: "ç›®æ¨™æ™‚åˆ»", finished: "å‡¦ç†å®Œäº†", edit: "ç·¨é›†", del: "å‰Šé™¤",
    confImp: "ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã‹ï¼Ÿ", confDel: "ã“ã®è¨˜éŒ²ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ", alertFill: "ã‚µãƒ¢ãƒŠãƒ¼åã¨æ—¥ä»˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„", day: "æ—¥"
  },
  ko: {
    title: "ë¦¬ê·¸ ì˜¤ë¸Œ ë ˆì „ë“œ ì œì¬ ê´€ë¦¬",
    marquee: "ğŸ›¡ï¸ í•µ ì‚¬ìš©ì„ ë°˜ëŒ€í•˜ë©°, ê³µì •í•œ ê²½ìŸ í™˜ê²½ì„ ë§Œë“­ì‹œë‹¤. âš–ï¸ ê±°ì§“ëœ ìŠ¹ë¦¬ëŠ” ì˜ë¯¸ê°€ ì—†ìœ¼ë©°, ì§„ì •í•œ ì‹¤ë ¥ì´ ì˜ê´‘ì…ë‹ˆë‹¤. âš”ï¸ ì •ì •ë‹¹ë‹¹í•œ ìŠ¹ë¶€ë§Œì´ ì†Œí™˜ì‚¬ì˜ ìë¶€ì‹¬ì…ë‹ˆë‹¤.",
    acc: "ì†Œí™˜ì‚¬ ê³„ì •", type: "ì²˜ë¶„ ìœ í˜•", date: "ë‚ ì§œ ì„ íƒ", time: "ìƒì„¸ ì‹œê°„",
    ban: "í•´ì œ ì˜ˆì •", app: "ì´ì˜ ì‹ ì²­", add: "ê¸°ë¡ ë“±ë¡", exp: "ğŸ“¥ ë°ì´í„° ë‚´ë³´ë‚´ê¸°", imp: "ğŸ“¤ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°",
    search: "ğŸ” ì†Œí™˜ì‚¬ ê²€ìƒ‰...", sort: "ì •ë ¬", recent: "ê°€ê¹Œìš´ ì‹œì¼", far: "ë¨¼ ì‹œì¼",
    target: "ëª©í‘œ ì‹œê°„", finished: "ì²˜ë¦¬ ì™„ë£Œ", edit: "ìˆ˜ì •", del: "ì‚­ì œ",
    confImp: "ë°±ì—…ì„ ë¶ˆëŸ¬ì˜¤ì‹œê² ìŠµë‹ˆê¹Œ?", confDel: "ì´ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?", alertFill: "ê³„ì •ê³¼ ë‚ ì§œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”", day: "ì¼"
  }
};

let currentLang = localStorage.getItem('lolLang') || 'zh';
let records = JSON.parse(localStorage.getItem('lolRecords') || '[]');
let sortAsc = true; 
let editIndex = null;
let currentType = 'è§£ç¦';

function changeLang(lang) {
  currentLang = lang;
  localStorage.setItem('lolLang', lang);
  document.getElementById('lang-panel').style.display = 'none';
  updateUI();
}

function setType(type) {
  playClickSound();
  currentType = type;
  document.getElementById('type-ban').style.background = type === 'è§£ç¦' ? '#c89b3c' : 'transparent';
  document.getElementById('type-ban').style.color = type === 'è§£ç¦' ? '#010a13' : '#c89b3c';
  document.getElementById('type-app').style.background = type === 'ç”³è¿°' ? '#c89b3c' : 'transparent';
  document.getElementById('type-app').style.color = type === 'ç”³è¿°' ? '#010a13' : '#c89b3c';
}

function updateUI() {
  const t = i18n[currentLang];
  document.querySelectorAll('.lang-item').forEach(el => el.classList.remove('active'));
  document.getElementById(`lang-${currentLang}`).classList.add('active');
  document.getElementById('main-title').innerText = t.title;
  document.getElementById('marquee-text').innerText = t.marquee;
  document.getElementById('lbl-acc').innerText = t.acc;
  document.getElementById('lbl-type').innerText = t.type;
  document.getElementById('lbl-date').innerText = t.date;
  document.getElementById('lbl-time').innerText = t.time;
  document.getElementById('type-ban').innerText = t.ban;
  document.getElementById('type-app').innerText = t.app;
  document.getElementById('btn-add').innerText = t.add;
  document.getElementById('btn-exp').innerText = t.exp;
  document.getElementById('btn-imp-lbl').innerText = t.imp;
  document.getElementById('search').placeholder = t.search;
  document.getElementById('sort-lbl').innerText = t.sort;
  document.getElementById('sort-val').innerText = sortAsc ? t.recent : t.far;
  setType(currentType);
  render();
}

function toggleSort() {
  playClickSound();
  sortAsc = !sortAsc;
  updateUI();
}

function render() {
  const t = i18n[currentLang];
  const q = document.getElementById('search').value.toLowerCase();
  const box = document.getElementById('list');
  const now = Date.now();
  box.innerHTML = '';

  let list = records.map((r, i) => ({...r, originalIdx: i}))
                   .filter(r => r.account.toLowerCase().includes(q))
                   .sort((a, b) => sortAsc ? new Date(a.datetime) - new Date(b.datetime) : new Date(b.datetime) - new Date(a.datetime));

  list.forEach((r, i) => {
    const diff = new Date(r.datetime).getTime() - now;
    const isExpired = diff <= 0;
    const d = Math.floor(diff/86400000);
    const h = String(Math.floor(Math.max(0, diff%86400000/3600000))).padStart(2, '0');
    const m = String(Math.floor(Math.max(0, diff%3600000/60000))).padStart(2, '0');
    const s = String(Math.floor(Math.max(0, diff%60000/1000))).padStart(2, '0');

    box.innerHTML += `
      <div class="p-6 md:p-8 hextech-card relative overflow-hidden">
        <div class="flex flex-col md:flex-row justify-between items-center relative z-10 text-center">
          <div class="flex-1">
            <div class="flex items-center justify-center gap-6 mb-4">
              <span class="px-5 py-1.5 bg-[#c89b3c] text-[#010a13] text-[13px] font-black italic shadow-md uppercase">${r.type === 'è§£ç¦' ? t.ban : t.app}</span>
              <span class="text-[#f0e6d2] font-black text-2xl tracking-tighter">${r.account}</span>
            </div>
            <div class="text-base text-[#a09b8c] mb-6 font-black uppercase tracking-[0.2em]">${t.target}ï¼š<span class="text-[#f0e6d2]">${r.datetime.replace('T',' ')}</span></div>
            <div class="flex flex-col items-center">
              <div class="lol-timer-red font-black italic flex items-center justify-center">
                ${isExpired ? 
                  `<span class="text-green-500 text-3xl font-bold">${t.finished}</span>` : 
                  `<span class="warn-icon-red text-3xl">!</span>
                   <span class="text-4xl leading-none">${d}</span>
                   <span class="text-sm ml-1 self-end mb-1">${t.day}</span>
                   <span class="text-3xl tracking-widest leading-none ml-2">${h}:${m}:${s}</span>`
                }
              </div>
            </div>
          </div>
          <div class="flex flex-row md:flex-col gap-4 mt-6 md:mt-0 md:ml-8">
            <button onclick="edit(${r.originalIdx})" class="btn-play-style px-6 md:px-10 py-3 text-sm font-black uppercase tracking-widest">${t.edit}</button>
            <button onclick="del(${r.originalIdx})" class="btn-danger-style px-6 md:px-10 py-3 text-sm font-black uppercase tracking-widest">${t.del}</button>
          </div>
        </div>
      </div>`;
  });
}

function addRecord() {
  playClickSound();
  const t = i18n[currentLang];
  const account = document.getElementById('account').value.trim();
  const date = document.getElementById('date').value;
  let time = document.getElementById('time').value || "00:00";
  if(!account || !date) return alert(t.alertFill);
  const data = { account, type: currentType, datetime: `${date}T${time}` };
  if(editIndex !== null) { records[editIndex] = data; editIndex = null; } else { records.push(data); }
  localStorage.setItem('lolRecords', JSON.stringify(records));
  render();
  document.getElementById('account').value = ''; document.getElementById('date').value = ''; document.getElementById('time').value = '';
}

function del(i) { 
  playClickSound();
  if(confirm(i18n[currentLang].confDel)) {
    records.splice(i, 1);
    localStorage.setItem('lolRecords', JSON.stringify(records));
    render();
  } 
}

function edit(i) { 
  playClickSound();
  const r = records[i]; const dt = r.datetime.split('T');
  document.getElementById('account').value = r.account; 
  setType(r.type);
  document.getElementById('date').value = dt[0]; document.getElementById('time').value = dt[1] === "00:00" ? "" : dt[1];
  editIndex = i; window.scrollTo({top: 0, behavior: 'smooth'});
}

function exportData() { playClickSound(); if(records.length===0) return; const blob = new Blob([JSON.stringify(records, null, 2)], {type:"application/json"}); const a = document.createElement("a"); a.href=URL.createObjectURL(blob); a.download="LOL_REPORT.json"; a.click(); }
function importData(input) { playClickSound(); const reader = new FileReader(); reader.onload=(e)=>{ records=JSON.parse(e.target.result); localStorage.setItem('lolRecords', JSON.stringify(records)); updateUI(); }; reader.readAsText(input.files[0]); }

document.addEventListener('click', (e) => {
  const panel = document.getElementById('lang-panel');
  const btn = document.getElementById('lang-menu-btn');
  if (panel.style.display === 'block' && !panel.contains(e.target) && !btn.contains(e.target)) {
    panel.style.display = 'none';
  }
});

updateUI();
setInterval(render, 1000);
</script>
</body>
</html>