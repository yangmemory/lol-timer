<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>è‹±é›„è”ç›Ÿç¦ä»¤ç®¡ç†ç³»ç»Ÿ</title>
  
  <link rel="icon" href="https://raw.githubusercontent.com/yangmemory/lol-timer/main/lol.ico" type="image/x-icon" />
  <link rel="shortcut icon" href="https://raw.githubusercontent.com/yangmemory/lol-timer/main/lol.ico" type="image/x-icon" />

  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background-color: #010a13; color: #f0e6d2; font-family: "Microsoft YaHei", "å¾®è½¯é›…é»‘", sans-serif; overflow-x: hidden; }
    body::before {
      content: ""; position: fixed; inset: 0;
      background: url("https://p6.qhimg.com/t01666e8536ec7a38f3.jpg") center / cover no-repeat fixed;
      filter: brightness(0.25); z-index: -2;
    }

    /* æµ·å…‹æ–¯ç§‘æŠ€é£æ ¼å¡ç‰‡ */
    .hextech-card { background: rgba(1, 10, 19, 0.95); border: 2px solid #1e2328; border-image: linear-gradient(to bottom, #785a28, #463714) 1; box-shadow: 0 10px 40px rgba(0,0,0,0.9); }

    /* LOL ç»å…¸é‡‘è‰² PLAY æŒ‰é’®é£æ ¼ */
    .btn-play-style {
      background: linear-gradient(to bottom, #c89b3c 0%, #785a28 100%);
      border: 1px solid #010a13;
      box-shadow: inset 0 0 2px 1px rgba(255,255,255,0.2), 0 0 15px rgba(200, 155, 60, 0.3);
      color: #010a13;
      text-shadow: 0 1px 0 rgba(255,255,255,0.3);
      font-weight: 900;
      transition: all 0.1s;
      text-transform: uppercase;
      cursor: pointer;
    }
    .btn-play-style:hover {
      background: linear-gradient(to bottom, #e1ad42 0%, #c89b3c 100%);
      box-shadow: inset 0 0 2px 1px rgba(255,255,255,0.4), 0 0 25px rgba(200, 155, 60, 0.6);
    }
    .btn-play-style:active { transform: scale(0.96); filter: brightness(0.8); }

    /* çº¢è‰²è­¦ç¤ºæŒ‰é’® */
    .btn-danger-style {
      background: linear-gradient(to bottom, #5c0e10 0%, #3e0a0b 100%);
      border: 1px solid #783a3c;
      color: #f0e6d2;
      font-weight: bold;
      cursor: pointer;
    }
    .btn-danger-style:hover { filter: brightness(1.3); box-shadow: 0 0 15px rgba(255, 0, 0, 0.3); }

    /* è¾“å…¥æ¡†å®¹å™¨ï¼ˆå¸¦å›¾æ ‡ä¸”æ–‡å­—å±…ä¸­ï¼‰ */
    .input-group { position: relative; display: flex; align-items: center; background: #010a13; border: 1px solid #463714; height: 46px; }
    .input-group:focus-within { border-color: #c89b3c; box-shadow: 0 0 10px rgba(200, 155, 60, 0.3); }
    .input-icon { width: 45px; text-align: center; color: #c89b3c; font-size: 1.3rem; border-right: 1px solid #1e2328; }
    input, select { background: transparent !important; border: none !important; color: #f0e6d2 !important; height: 100%; width: 100%; outline: none !important; text-align: center; font-weight: bold; }
    
    /* ä¿®æ­£æ—¥æœŸå›¾æ ‡é¢œè‰² */
    input[type="date"]::-webkit-calendar-picker-indicator {
      filter: invert(72%) sepia(15%) saturate(848%) hue-rotate(1deg) brightness(95%) contrast(88%);
      cursor: pointer;
      margin-right: 10px;
    }

    /* æ»šåŠ¨æ–‡å­—æ ·å¼ */
    .scroll-container { background: rgba(30, 35, 40, 0.9); border-bottom: 2px solid #785a28; overflow: hidden; white-space: nowrap; }
    .scroll-text { display: inline-block; padding-left: 100%; animation: marquee 28s linear infinite; color: #c89b3c; font-size: 0.95rem; letter-spacing: 2px; font-weight: bold; }
    @keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }

    @keyframes goldPulse { 0%, 100% { border-color: #c89b3c; } 50% { border-color: #f0e6d2; } }
    .status-active { animation: goldPulse 2s infinite; border-width: 2px; }
  </style>
</head>
<body class="min-h-screen">

  <div class="scroll-container py-2 mb-8">
    <div class="scroll-text">
      ğŸ›¡ï¸ æŠµåˆ¶å¤–æŒ‚ï¼Œå…±å»ºå…¬å¹³ç«æŠ€ç¯å¢ƒã€‚ âš–ï¸ è™šå‡çš„èƒœåˆ©æ¯«æ— æ„ä¹‰ï¼ŒçœŸå®çš„ç«æŠ€æ‰æ˜¯è£è€€ã€‚ âš”ï¸ å‡­å®åŠ›èµ¢ä¸‹çš„æ¯”èµ›ï¼Œæ‰æ˜¯å¬å”¤å¸ˆçœŸæ­£çš„å°Šä¸¥ã€‚ ğŸš« è«è®©è„šæœ¬æŠ¹é»‘ä½ çš„æ“ä½œï¼Œè«è®©å°å·ç»ˆç»“ä½ çš„è‹±é›„è·¯ï¼
    </div>
  </div>

  <div class="max-w-6xl mx-auto p-4">
    <header class="text-center mb-12">
      <h1 class="text-5xl font-black mb-2 tracking-[0.4em] text-[#c89b3c] uppercase italic" style="text-shadow: 0 0 25px rgba(200,155,60,0.5);">è‹±é›„è”ç›Ÿç¦ä»¤ç®¡ç†ç³»ç»Ÿ</h1>
      <p class="text-[#a09b8c] text-lg tracking-[0.3em] font-bold">JUSTICE WILL BE SERVED</p>
    </header>

    <div class="hextech-card p-8 mb-12">
      <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
        <div class="flex flex-col">
          <label class="text-xs text-[#c89b3c] mb-2 uppercase font-black text-center tracking-widest">å¬å”¤å¸ˆè´¦å·</label>
          <div class="input-group">
            <span class="input-icon">ğŸ‘¤</span>
            <input id="account" placeholder="SUMMONER NAME" />
          </div>
        </div>
        <div class="flex flex-col">
          <label class="text-xs text-[#c89b3c] mb-2 uppercase font-black text-center tracking-widest">å¤„ç½šç±»åˆ«</label>
          <div class="input-group">
            <span class="input-icon">âš–ï¸</span>
            <select id="type">
              <option value="è§£ç¦">è´¦å·è§£ç¦</option>
              <option value="ç”³è¿°">å‘èµ·ç”³è¿°</option>
            </select>
          </div>
        </div>
        <div class="flex flex-col">
          <label class="text-xs text-[#c89b3c] mb-2 uppercase font-black text-center tracking-widest">è§£ç¦æ—¥æœŸ</label>
          <div class="input-group">
            <span class="input-icon">ğŸ“…</span>
            <input id="date" type="date" />
          </div>
        </div>
        <div class="flex flex-col">
          <label class="text-xs text-[#c89b3c] mb-2 uppercase font-black text-center tracking-widest">å…·ä½“æ—¶é—´</label>
          <div class="input-group">
            <span class="input-icon">ğŸ•’</span>
            <input id="time" type="text" placeholder="16:30 (å¯é€‰)" maxlength="5" oninput="this.value = this.value.replace(/[^\d]/g, '').replace(/(\d{2})(?=\d)/, '$1:')" />
          </div>
        </div>
        <div class="flex items-end">
          <button onclick="addRecord()" class="btn-play-style w-full h-[46px] text-xl tracking-[0.2em]">å½•å…¥ç³»ç»Ÿ</button>
        </div>
      </div>

      <div class="flex gap-10 mt-8 pt-6 border-t border-[#1e2328] text-xs font-black uppercase tracking-[0.2em] justify-center">
        <button onclick="exportData()" class="text-[#c89b3c] hover:text-white transition-colors">ğŸ“¥ ä¸‹è½½æœ¬åœ°å¤‡ä»½</button>
        <label class="text-[#c89b3c] hover:text-white cursor-pointer transition-colors">
          ğŸ“¤ ä¸Šä¼ å†å²å¤‡ä»½ <input type="file" id="importFile" class="hidden" onchange="importData(this)">
        </label>
      </div>
    </div>

    <div class="relative mb-10">
      <div class="absolute inset-y-0 left-0 pl-5 flex items-center pointer-events-none text-[#c89b3c] text-xl">ğŸ”</div>
      <input id="search" placeholder="æ£€ç´¢ç›®æ ‡å¬å”¤å¸ˆè®°å½•..." oninput="render()" class="w-full p-5 pl-14 bg-[#010a13] border-2 border-[#1e2328] rounded-none italic text-[#f0e6d2] text-lg focus:border-[#c89b3c] outline-none transition-all" />
    </div>

    <div id="list" class="grid grid-cols-1 md:grid-cols-2 gap-8"></div>
  </div>

<script>
let records = JSON.parse(localStorage.getItem('lolRecords') || '[]');
let editIndex = null;

function format24h(isoStr) {
    const d = new Date(isoStr);
    const hour = String(d.getHours()).padStart(2, '0');
    const min = String(d.getMinutes()).padStart(2, '0');
    return `${d.getFullYear()}å¹´${d.getMonth() + 1}æœˆ${d.getDate()}æ—¥ ${hour}:${min}`;
}

function exportData() {
    if(records.length === 0) return alert('ç³»ç»Ÿæç¤ºï¼šæ•°æ®åº“å†…æš‚æ— è®°å½•');
    const dataStr = JSON.stringify(records, null, 2);
    const blob = new Blob([dataStr], { type: "application/json" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = `LOL_BAN_REPORT_${new Date().toLocaleDateString()}.json`;
    a.click();
}

function importData(input) {
    const file = input.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = function(e) {
        try {
            const imported = JSON.parse(e.target.result);
            if (Array.isArray(imported)) {
                if(confirm('ç³»ç»Ÿç¡®è®¤ï¼šå¯¼å…¥å°†è¦†ç›–å½“å‰æ‰€æœ‰æ•°æ®ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ')) {
                    records = imported;
                    localStorage.setItem('lolRecords', JSON.stringify(records));
                    render();
                }
            }
        } catch (err) { alert('ç³»ç»Ÿæç¤ºï¼šæ–‡ä»¶æŸåæˆ–æ ¼å¼é”™è¯¯'); }
    };
    reader.readAsText(file);
}

function addRecord(){
  const account = document.getElementById('account').value.trim();
  const type = document.getElementById('type').value;
  const date = document.getElementById('date').value;
  let time = document.getElementById('time').value || "00:00";

  if(!account || !date) return alert('ç³»ç»Ÿæç¤ºï¼šè¯·å®Œå–„è´¦å·åŠæ—¥æœŸä¿¡æ¯');
  
  const data = { account, type, datetime: `${date}T${time}` };
  if(editIndex !== null){ records[editIndex] = data; editIndex = null; }
  else { records.push(data); }
  
  localStorage.setItem('lolRecords', JSON.stringify(records));
  render();
  
  // æ¸…ç©ºè¾“å…¥
  document.getElementById('account').value = '';
  document.getElementById('date').value = '';
  document.getElementById('time').value = '';
}

function del(i){
  if(confirm('å®‰å…¨è­¦å‘Šï¼šç¡®å®šè¦ä»ç³»ç»Ÿä¸­æŠ¹é™¤æ­¤é¡¹è®°å½•å—ï¼Ÿ')) {
    records.splice(i,1);
    localStorage.setItem('lolRecords', JSON.stringify(records));
    render();
  }
}

function edit(i){
  const r = records[i];
  const dt = r.datetime.split('T');
  document.getElementById('account').value = r.account;
  document.getElementById('type').value = r.type;
  document.getElementById('date').value = dt[0];
  document.getElementById('time').value = dt[1] === "00:00" ? "" : dt[1];
  editIndex = i;
  window.scrollTo({top: 0, behavior: 'smooth'});
}

function render(){
  const q = document.getElementById('search').value.toLowerCase();
  const now = Date.now();
  const box = document.getElementById('list');
  box.innerHTML='';

  records.filter(r=>r.account.toLowerCase().includes(q))
    .sort((a,b)=>new Date(a.datetime)-new Date(b.datetime))
    .forEach((r,i)=>{
      const targetTime = new Date(r.datetime).getTime();
      const diff = targetTime - now;
      const isWarning = diff < 3 * 86400000 && diff > 0;
      const isExpired = diff <= 0;

      const days = Math.floor(diff/86400000);
      const h = Math.floor(diff%86400000/3600000);
      const m = Math.floor(diff%3600000/60000);
      const s = Math.floor(diff%60000/1000);

      box.innerHTML += `
      <div class="p-8 hextech-card relative overflow-hidden ${isWarning ? 'status-active' : ''}">
        <div class="flex justify-between items-center relative z-10">
          <div class="flex-1">
            <div class="flex items-center gap-5 mb-4">
              <span class="px-4 py-1 bg-[#c89b3c] text-[#010a13] text-sm font-black italic shadow-lg">${r.type}</span>
              <span class="text-[#f0e6d2] font-black text-3xl tracking-tighter">${r.account}</span>
            </div>
            <div class="text-sm text-[#a09b8c] mb-5 font-black tracking-widest uppercase opacity-80">
              ç›®æ ‡æ—¶åˆ»ï¼š<span class="text-[#f0e6d2]">${format24h(r.datetime)}</span>
            </div>
            <div class="flex flex-col">
              <span class="text-xs text-[#c89b3c] font-black mb-1 uppercase tracking-[0.3em]">å‰©ä½™åˆ‘æœŸ / æµç¨‹çŠ¶æ€</span>
              <span class="text-4xl font-black italic tracking-tighter ${isExpired ? 'text-green-500' : 'text-[#c89b3c]'}">
                ${isExpired ? 'PROCESS FINISHED' : `${days}å¤© ${h}æ—¶ ${m}åˆ† ${s}ç§’`}
              </span>
            </div>
          </div>
          <div class="flex flex-col gap-4 ml-6">
            <button onclick="edit(${i})" class="btn-play-style px-8 py-2 text-sm">ä¿®æ”¹è®°å½•</button>
            <button onclick="del(${i})" class="btn-danger-style px-8 py-2 text-sm">ç§»é™¤è®°å½•</button>
          </div>
        </div>
        <div class="absolute -right-4 -bottom-6 text-7xl font-black italic opacity-[0.03] pointer-events-none">REPORT</div>
      </div>`;
    });
}
setInterval(render, 1000);
render();
</script>
</body>
</html>
