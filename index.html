<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LOL è§£ç¦ / ç”³è¿°æ—¶é—´ç®¡ç†</title>

  <!-- LOL Favicon -->
  <link rel="icon" href="https://static.wikia.nocookie.net/leagueoflegends/images/6/6c/League_of_Legends_Icon.png" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Bing Random Background -->
  <style>
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: url("https://www.bing.com/th?id=OHR.Random_EN-US.jpg&rf=LaDigue_1920x1080.jpg") center / cover no-repeat fixed;
      z-index: -2;
    }
    body::after {
      content: "";
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.45);
      z-index: -1;
    }
    @keyframes pulseSoft {
      0%,100% { opacity: 1; }
      50% { opacity: .85; }
    }
  </style>
</head>
<body class="text-white min-h-screen">

  <div class="max-w-5xl mx-auto p-4">

    <header class="text-center mb-8">
      <h1 class="text-3xl font-bold mb-2">LOL è§£ç¦ / ç”³è¿°æ—¶é—´ç®¡ç†</h1>
      <p class="opacity-90">å…¬å¹³æ¸¸æˆï¼Œæ‰èƒ½è®©èƒœåˆ©æ›´æœ‰æ„ä¹‰ ğŸ®</p>
    </header>

    <!-- è¡¨å• -->
    <div class="bg-black/60 rounded-xl p-4 mb-6">
      <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
        <input id="account" placeholder="è´¦å· / æ˜µç§°" class="p-2 rounded text-black" />
        <select id="type" class="p-2 rounded text-black">
          <option value="è§£ç¦">è§£ç¦</option>
          <option value="ç”³è¿°">ç”³è¿°</option>
        </select>
        <input id="date" type="date" class="p-2 rounded text-black" />
        <input id="time" type="time" class="p-2 rounded text-black" />
        <button onclick="addRecord()" class="bg-blue-600 rounded p-2">æ·»åŠ  / ä¿å­˜</button>
      </div>
    </div>

    <!-- æœç´¢ -->
    <input id="search" placeholder="æœç´¢è´¦å·æˆ–æ˜µç§°" oninput="render()" class="w-full mb-4 p-2 rounded text-black" />

    <!-- åˆ—è¡¨ -->
    <div id="list" class="space-y-4"></div>

  </div>

<script>
let records = JSON.parse(localStorage.getItem('lolRecords') || '[]');
let editIndex = null;

function addRecord(){
  const account = document.getElementById('account').value.trim();
  const type = document.getElementById('type').value;
  const date = document.getElementById('date').value;
  const time = document.getElementById('time').value;
  if(!account || !date || !time) return alert('è¯·å¡«å†™å®Œæ•´');

  const data = { account, type, datetime: `${date}T${time}` };

  if(editIndex !== null){
    records[editIndex] = data;
    editIndex = null;
  }else{
    records.push(data);
  }

  localStorage.setItem('lolRecords', JSON.stringify(records));
  document.querySelectorAll('input').forEach(i=>i.value='');
  render();
}

function del(i){
  if(confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡è®°å½•å—ï¼Ÿ')){
    records.splice(i,1);
    localStorage.setItem('lolRecords', JSON.stringify(records));
    render();
  }
}

function edit(i){
  const r = records[i];
  const d = new Date(r.datetime);
  document.getElementById('account').value = r.account;
  document.getElementById('type').value = r.type;
  document.getElementById('date').value = d.toISOString().slice(0,10);
  document.getElementById('time').value = d.toTimeString().slice(0,5);
  editIndex = i;
}

function render(){
  const q = document.getElementById('search').value.toLowerCase();
  const now = Date.now();
  const box = document.getElementById('list');
  box.innerHTML='';

  records.filter(r=>r.account.toLowerCase().includes(q))
    .sort((a,b)=>new Date(a.datetime)-new Date(b.datetime))
    .forEach((r,i)=>{
      const t = new Date(r.datetime).getTime();
      const diff = t-now;
      const days = Math.floor(diff/86400000);
      const h = Math.floor(diff%86400000/3600000);
      const m = Math.floor(diff%3600000/60000);
      const s = Math.floor(diff%60000/1000);

      const warn = diff < 7*86400000 && diff>0;

      box.innerHTML += `
      <div class="p-4 rounded-xl bg-black/60 ${warn?'border border-red-500 animate-[pulseSoft_1.5s_infinite]':''}">
        <div class="flex justify-between items-center">
          <div>
            <div class="font-bold">${r.account} Â· ${r.type}</div>
            <div class="text-sm opacity-80">${r.datetime.replace('T',' ')}</div>
            <div class="mt-1 text-lg ${warn?'text-red-400':'text-green-300'}">
              ${diff>0?`å‰©ä½™ ${days}å¤© ${h}æ—¶ ${m}åˆ† ${s}ç§’`:'å·²åˆ°æœŸ'}
            </div>
          </div>
          <div class="space-x-2">
            <button onclick="edit(${i})" class="px-3 py-1 bg-yellow-500 rounded">ç¼–è¾‘</button>
            <button onclick="del(${i})" class="px-3 py-1 bg-red-600 rounded">åˆ é™¤</button>
          </div>
        </div>
      </div>`;
    });
}

setInterval(render,1000);
render();
</script>
</body>
</html>
