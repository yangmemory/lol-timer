<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LOL è§£ç¦ / ç”³è¿°æ—¶é—´ç®¡ç†</title>
  <link rel="icon" href="https://static.wikia.nocookie.net/leagueoflegends/images/6/6c/League_of_Legends_Icon.png" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background-color: #010a13; color: #f0e6d2; font-family: "Microsoft YaHei", sans-serif; }
    body::before {
      content: ""; position: fixed; inset: 0;
      background: url("https://p6.qhimg.com/t01666e8536ec7a38f3.jpg") center / cover no-repeat fixed;
      filter: brightness(0.3); z-index: -2;
    }
    .hextech-card { background: rgba(30, 35, 40, 0.9); border: 1px solid #463714; box-shadow: inset 0 0 20px rgba(0,0,0,0.5); }
    .btn-lol { background: linear-gradient(to bottom, #1e2328, #111111); border: 1px solid #c8aa6e; color: #c8aa6e; transition: all 0.2s; cursor: pointer; }
    .btn-lol:hover { background: #c89b3c; color: #010a13; }
    input, select { background: rgba(10, 20, 30, 0.9) !important; border: 1px solid #463714 !important; color: #f0e6d2 !important; }
    @keyframes goldPulse { 0%, 100% { border-color: #c8aa6e; box-shadow: 0 0 5px #c8aa6e; } 50% { border-color: #f0e6d2; box-shadow: 0 0 15px #c8aa6e; } }
    .status-active { animation: goldPulse 2s infinite; }
  </style>
</head>
<body class="min-h-screen">

  <div class="max-w-5xl mx-auto p-6">
    <header class="text-center mb-10">
      <h1 class="text-3xl font-bold mb-2 tracking-[0.2em] text-[#c8aa6e]">å¬å”¤å¸ˆå¤„ç½šç®¡ç†ç³»ç»Ÿ</h1>
      <div class="h-[2px] w-32 bg-gradient-to-r from-transparent via-[#c8aa6e] to-transparent mx-auto mb-2"></div>
      <p class="text-[#a09b8c] text-sm italic">æœ¬åœ°å®‰å…¨å­˜å‚¨ç‰ˆ Â· æ•°æ®æ°¸ä¸ä¸Šä¼ </p>
    </header>

    <div class="hextech-card p-6 rounded-sm mb-8 border-b-2 border-b-[#c8aa6e]">
      <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
        <div class="flex flex-col">
          <label class="text-xs text-[#c8aa6e] mb-1">å¬å”¤å¸ˆè´¦å·</label>
          <input id="account" placeholder="è¾“å…¥åç§°" class="p-2 rounded-sm" />
        </div>
        <div class="flex flex-col">
          <label class="text-xs text-[#c8aa6e] mb-1">è®°å½•ç±»å‹</label>
          <select id="type" class="p-2 rounded-sm">
            <option value="è§£ç¦">è´¦å·è§£ç¦</option>
            <option value="ç”³è¿°">å‘èµ·ç”³è¿°</option>
          </select>
        </div>
        <div class="flex flex-col">
          <label class="text-xs text-[#c8aa6e] mb-1">æ—¥æœŸ</label>
          <input id="date" type="date" class="p-2 rounded-sm" />
        </div>
        <div class="flex flex-col">
          <label class="text-xs text-[#c8aa6e] mb-1">å…·ä½“æ—¶é—´</label>
          <input id="time" type="text" placeholder="16:30" maxlength="5" oninput="this.value = this.value.replace(/[^\d]/g, '').replace(/(\d{2})(?=\d)/, '$1:')" class="p-2 rounded-sm font-mono text-center" />
        </div>
        <div class="flex items-end">
          <button onclick="addRecord()" class="btn-lol w-full py-2 font-bold text-sm">ä¿å­˜è®°å½•</button>
        </div>
      </div>

      <div class="flex gap-6 mt-6 pt-4 border-t border-[#463714] text-[11px]">
        <button onclick="exportData()" class="text-[#c8aa6e] hover:text-white transition-colors">ğŸ“¥ å¯¼å‡ºå¤‡ä»½ (ä¸‹è½½ JSON æ–‡ä»¶)</button>
        <label class="text-[#c8aa6e] hover:text-white cursor-pointer transition-colors">
          ğŸ“¤ å¯¼å…¥å¤‡ä»½ (ä¸Šä¼  JSON æ–‡ä»¶) <input type="file" id="importFile" class="hidden" onchange="importData(this)">
        </label>
        <span class="text-gray-600 ml-auto">æ•°æ®ä»…ä¿å­˜åœ¨å½“å‰æµè§ˆå™¨ï¼Œè¯·å®šæœŸå¤‡ä»½</span>
      </div>
    </div>

    <div class="relative mb-6">
      <input id="search" placeholder="ğŸ” æœç´¢å¬å”¤å¸ˆ..." oninput="render()" class="w-full p-3 rounded-sm italic text-sm" />
    </div>

    <div id="list" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
  </div>

<script>
let records = JSON.parse(localStorage.getItem('lolRecords') || '[]');
let editIndex = null;

function format24h(isoStr) {
    const d = new Date(isoStr);
    return `${d.getFullYear()}å¹´${d.getMonth() + 1}æœˆ${d.getDate()}æ—¥ ${String(d.getHours()).padStart(2, '0')}:${String(d.getMinutes()).padStart(2, '0')}`;
}

// å¯¼å‡º JSON
function exportData() {
    if(records.length === 0) return alert('æ²¡æœ‰æ•°æ®å¯ä»¥å¯¼å‡º');
    const dataStr = JSON.stringify(records, null, 2);
    const blob = new Blob([dataStr], { type: "application/json" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = `LOL_æ•°æ®å¤‡ä»½_${new Date().toLocaleDateString()}.json`;
    a.click();
    URL.revokeObjectURL(url);
}

// å¯¼å…¥ JSON
function importData(input) {
    const file = input.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = function(e) {
        try {
            const imported = JSON.parse(e.target.result);
            if (Array.isArray(imported)) {
                if(confirm('å¯¼å…¥å°†è¦†ç›–å½“å‰æ‰€æœ‰æ•°æ®ï¼Œç¡®å®šå—ï¼Ÿ')) {
                    records = imported;
                    localStorage.setItem('lolRecords', JSON.stringify(records));
                    render();
                    alert('å¯¼å…¥æˆåŠŸï¼');
                }
            }
        } catch (err) {
            alert('æ–‡ä»¶æ ¼å¼é”™è¯¯ï¼');
        }
    };
    reader.readAsText(file);
}

function addRecord(){
  const account = document.getElementById('account').value.trim();
  const type = document.getElementById('type').value;
  const date = document.getElementById('date').value;
  let time = document.getElementById('time').value;

  if(!account || !date || !time) return alert('è¯·å¡«å…¨ä¿¡æ¯');
  
  const data = { account, type, datetime: `${date}T${time}` };

  if(editIndex !== null){
    records[editIndex] = data;
    editIndex = null;
  }else{
    records.push
