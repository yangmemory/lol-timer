<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<title>LOL è§£ç¦ / ç”³è¿°æ—¶é—´æŸ¥è¯¢</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
body {
  background: #0f172a;
  color: #e5e7eb;
  font-family: Arial, sans-serif;
  padding: 20px;
}
h1 {
  text-align: center;
  margin-bottom: 20px;
}
.container {
  max-width: 1000px;
  margin: auto;
}
input, select, button {
  padding: 8px;
  margin: 5px;
  border-radius: 6px;
  border: none;
}
button {
  cursor: pointer;
  background: #2563eb;
  color: white;
}
button.delete {
  background: #dc2626;
}
input, select {
  background: #1e293b;
  color: #e5e7eb;
}
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 20px;
}
th, td {
  padding: 10px;
  border-bottom: 1px solid #334155;
  text-align: center;
}
tr.danger {
  background: rgba(220,38,38,0.25);
}
.search {
  width: 100%;
  margin-top: 10px;
}
.countdown {
  font-weight: bold;
  color: #facc15;
}
</style>
</head>

<body>
<h1>ğŸ® LOL è§£ç¦ / ç”³è¿°æ—¶é—´ç®¡ç†</h1>
<div class="container">

<!-- æ·»åŠ è¡¨å• -->
<div>
  <input id="name" placeholder="è´¦å· / æ˜µç§°" />
  <input id="date" type="date" />
  <select id="type">
    <option value="è§£ç¦">è§£ç¦</option>
    <option value="ç”³è¿°">ç”³è¿°</option>
  </select>
  <button onclick="addRecord()">æ·»åŠ è®°å½•</button>
</div>

<!-- æœç´¢ -->
<input class="search" id="search" placeholder="ğŸ” æœç´¢è´¦å·æˆ–æ˜µç§°" oninput="render()" />

<!-- è¡¨æ ¼ -->
<table>
  <thead>
    <tr>
      <th>è´¦å· / æ˜µç§°</th>
      <th>ç±»å‹</th>
      <th>æ—¥æœŸ</th>
      <th>å€’è®¡æ—¶</th>
      <th>æ“ä½œ</th>
    </tr>
  </thead>
  <tbody id="list"></tbody>
</table>

</div>

<script>
const STORAGE_KEY = "lol_records";

let records = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [
  { name: "204668332", date: "2026-01-08", type: "è§£ç¦" },
  { name: "3479066850", date: "2026-01-19", type: "è§£ç¦" },
  { name: "Ryan(é¦™æ¸¯)", date: "2026-01-19", type: "è§£ç¦" },
  { name: "1933888688", date: "2028-07-17", type: "è§£ç¦" },
  { name: "3368632", date: "2026-04-19", type: "ç”³è¿°" },
  { name: "904122394", date: "2026-04-19", type: "ç”³è¿°" },
  { name: "Ryan", date: "2026-03-26", type: "ç”³è¿°" },
  { name: "ç¾ä¸½æ§ŸåŸ", date: "2026-04-14", type: "ç”³è¿°" }
];

function save() {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(records));
}

function addRecord() {
  const name = document.getElementById("name").value.trim();
  const date = document.getElementById("date").value;
  const type = document.getElementById("type").value;
  if (!name || !date) return alert("è¯·å¡«å†™å®Œæ•´");
  records.push({ name, date, type });
  save();
  render();
}

function removeRecord(index) {
  if (!confirm("ç¡®å®šåˆ é™¤è¿™æ¡è®°å½•ï¼Ÿ")) return;
  records.splice(index, 1);
  save();
  render();
}

function countdown(date) {
  const now = new Date();
  const target = new Date(date);
  const diff = target - now;
  if (diff <= 0) return "å·²åˆ°æœŸ";
  const days = Math.floor(diff / 86400000);
  const hours = Math.floor((diff % 86400000) / 3600000);
  return `${days}å¤© ${hours}å°æ—¶`;
}

function render() {
  const keyword = document.getElementById("search").value.toLowerCase();
  const tbody = document.getElementById("list");
  tbody.innerHTML = "";

  records.forEach((r, i) => {
    if (!r.name.toLowerCase().includes(keyword)) return;

    const diffDays = (new Date(r.date) - new Date()) / 86400000;
    const tr = document.createElement("tr");
    if (diffDays <= 7 && diffDays > 0) tr.classList.add("danger");

    tr.innerHTML = `
      <td>${r.name}</td>
      <td>${r.type}</td>
      <td>${r.date}</td>
      <td class="countdown">${countdown(r.date)}</td>
      <td><button class="delete" onclick="removeRecord(${i})">åˆ é™¤</button></td>
    `;
    tbody.appendChild(tr);
  });
}

render();
setInterval(render, 60000);
</script>
</body>
</html>
